(()=>{"use strict";const t="http://api.weatherapi.com/v1",e="ecc04dd12dfc427a81f192018230307",n=document.getElementById("header-img"),r=document.getElementById("current-temp"),o=document.getElementById("current-min-temp"),a=document.getElementById("current-max-temp"),c=document.getElementById("weekly-forecast-container"),d=document.getElementById("current-precip"),s=document.getElementById("current-humidity"),i=document.getElementById("current-wind"),l=document.querySelector(".hourly-forecast-container"),m=document.querySelector(".today-date");async function u(t){const e=await fetch(t);if(!e.ok)throw new Error("Network error");return e.json()}function y(t,e){const n=document.createElement("div"),r=document.createElement("div");return n.textContent=`${Math.round(t)}°`,r.textContent=`${Math.round(t)}°`,r}!async function(n){try{const n=`${t}/forecast.json?key=${e}&q=Leicester&days=7`,r=await u(n),d=r.forecast.forecastday[0],s=r.forecast.forecastday;!function(t){try{const{date:e,day:n}=t,r=new Date(e),c={day:"numeric",month:"long"},d=r.toLocaleDateString("en-US",c);m.textContent=d,o.textContent=`Min: ${Math.round(n.mintemp_c)}°`,a.textContent=`Max: ${Math.round(n.maxtemp_c)}°`}catch(t){displayErrorMessage("Failed to set daily forecast data. Please try again later."),console.error("Error:",t)}}(d),function(t){try{t.forEach((t=>{const{date:e,day:n}=t,r=function(t){const e=document.createElement("div");e.classList.add("forecast-item");const n=document.createElement("div");return n.textContent=t,n.classList.add("forecast-date"),e.appendChild(n),e}(new Date(e).toLocaleString("en-GB",{weekday:"long"})),o=function(t){const e=document.createElement("img");return e.src=t,e.classList.add("forecast-icon"),e}(n.condition.icon),a=function(){const t=document.createElement("div");return t.classList.add("forecast-temp-container"),t}(),d=y(n.mintemp_c),s=y(n.maxtemp_c);r.appendChild(o),r.appendChild(a),a.appendChild(d),a.appendChild(s),c.appendChild(r)}))}catch(t){displayErrorMessage("Failed to set weekly forecast data. Please try again later."),console.error("Error:",t)}}(s),function(t){try{const e=t.hour;l.innerHTML="",e.forEach((t=>{const e=function(t,e,n){const r=document.createElement("div");r.classList.add("hourly-forecast");const o=document.createElement("p");o.textContent=`${t}°C`,o.classList.add("hourly-forecast-temp");const a=document.createElement("img");a.src=e,a.classList.add("hourly-forecast-icon");const c=document.createElement("p");return c.textContent=n,c.classList.add("hourly-forecast-hour"),r.appendChild(o),r.appendChild(a),r.appendChild(c),r}(Math.round(t.temp_c),t.condition.icon,t.time.slice(11,16));l.appendChild(e)}))}catch(t){displayErrorMessage("Failed to set hourly forecast data. Please try again later."),console.error("Error:",t)}}(d)}catch(t){displayErrorMessage("Failed to fetch forecast data. Please try again later."),console.log("Error:",t)}}(),async function(o){try{const o=`${t}/current.json?key=${e}&q=Leicester`,a=(await u(o)).current,{temp_c:c,condition:l,humidity:m,gust_kph:y,precip_mm:p}=a;n.src=l.icon,r.textContent=`${c}°`,s.textContent=`${m}%`,i.textContent=`${Math.round(y)}/kph`,d.textContent=`${p}mm`}catch(t){displayErrorMessage("Failed to fetch current weather data. Please try again later."),console.log("Error:",t)}}()})();